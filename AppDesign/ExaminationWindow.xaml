<Window x:Class="ExaminationSystem.ExaminationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Examination_System.Question;assembly=ExaminationSystem"
        Title="Examination System" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="QuestionBorderStyle"  TargetType="Border">
            <!--<Setter Property="BorderBrush" Value="Black" />
            <Setter Property="BorderThickness" Value="2" />-->
            <Style.Triggers>
                <!--<Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="#FF9900" />
                    -->
                <!-- Orange on hover -->
                <!--
                </Trigger>
                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                    <Setter Property="BorderBrush" Value="Red" />
                    -->
                <!-- Red when selected -->
                <!--
                    <Setter Property="BorderThickness" Value="3" />
                </DataTrigger>-->
            </Style.Triggers>
        </Style>
        <DataTemplate DataType="{x:Type local:ChooseOneQuestion}" >

            <Border x:Name="ChooseOneQuestion" Padding="10" BorderThickness="2" Margin="10" 
                    Style="{StaticResource QuestionBorderStyle}"
                    PreviewMouseDown="QuestionContainer_MouseDown"
                    CornerRadius="10" BorderBrush="Black">
                <!--<StackPanel >-->
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <!--<StackPanel Orientation="Horizontal" >-->
                    <Grid Grid.Row="0"  >

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Grid.Column="0" 
                                Background="#2196F3" 
                               CornerRadius="5" 
                                  Padding="5">
                            <TextBlock FontSize="22" 
                                   FontWeight="Bold"
                                      Foreground="White"
                                   Text="{Binding Id, StringFormat=Question : {0}}"/>
                        </Border>
                        <TextBlock Grid.Column="1"
                                       FontSize="20" 
                                         FontWeight="Bold"
                                          Margin="10,0,0,0" 
                                           VerticalAlignment="Center" 
                                           Text="Multiple Choice (Choose One)"/>

                        <!--<Border Grid.Column="3"       
                          Padding="0"
                          CornerRadius="0">-->
                        <Image Source="./flag-black.png" 
                               Grid.Column="3"
                               Width="34" 
                               Height="34"
                               VerticalAlignment="Center"
                               Margin="0,0,5,0"                        
                               Opacity="0.7" 
                               Cursor="Hand"
                               MouseDown="FlagImage_MouseDown"
                               >
                            <Image.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="Black"/>
                                    <GradientStop Color="#FFF11414" Offset="1"/>
                                </LinearGradientBrush>
                            </Image.OpacityMask>
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect Opacity="0" 
                                             BlurRadius="10" 
                                             ShadowDepth="3"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Effect">
                                                <Setter.Value>
                                                    <DropShadowEffect Color="#FF9900" 
                                                     Opacity="0.7" 
                                                     BlurRadius="5" 
                                                     ShadowDepth="2"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                        <!--</Border>-->
                    </Grid>
                    <!--</StackPanel>-->
                    <TextBlock Grid.Row="1" FontSize="20" FontWeight="Bold"
                             Margin="0,20,0,20"
                             Text="{Binding Body}"/>
                    <ItemsControl Grid.Row="2" ItemsSource="{Binding MyAnswerList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <RadioButton Content="{Binding AnswerBody}" 
                                          Margin="5,5"
                                          GroupName="QuestionAnswers"
                                          IsChecked="{Binding IsSelected}"
                                             Checked="RadioButton_Checked"
                                             />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <!--</StackPanel>-->
                </Grid>
            </Border>
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:ChooseAllQuestion}">
            <Border x:Name="ChooseAllQuestion" Padding="10" BorderThickness="2" Margin="10" 
                    PreviewMouseDown="QuestionContainer_MouseDown"
                    Style="{StaticResource QuestionBorderStyle}"
                    CornerRadius="10" BorderBrush="Black">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0"  >

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Grid.Column="0" 
                  Background="#2196F3" 
                 CornerRadius="5" 
                    Padding="5">
                            <TextBlock FontSize="22" 
                     FontWeight="Bold"
                        Foreground="White"
                     Text="{Binding Id, StringFormat=Question : {0}}"/>
                        </Border>

                        <!-- Question Type (Column 1) -->
                        <TextBlock Grid.Column="1"
                         FontSize="20" 
                           FontWeight="Bold"
                            Margin="10,0,0,0" 
                             VerticalAlignment="Center" 
                             Text="Multiple Choice (Choose All)"/>


                        <Image Source="./flag-black.png" Grid.Column="3"
                                   Width="34" 
                                   Height="34"
                                   VerticalAlignment="Center"
                                   Margin="0,0,5,0"                        
                                   Opacity="0.7" 
                                   Cursor="Hand" MouseDown="FlagImage_MouseDown">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect Opacity="0" BlurRadius="10" ShadowDepth="3"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Effect">
                                                <Setter.Value>
                                                    <DropShadowEffect Color="#FF9900" Opacity="0.7" 
                                             BlurRadius="15" ShadowDepth="5"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                    </Grid>
                    <!--</StackPanel>-->
                    <TextBlock Grid.Row="1" FontSize="20" FontWeight="Bold"
               Margin="0,20,0,20"
               Text="{Binding Body}"/>
                    <ItemsControl Grid.Row="2" ItemsSource="{Binding MyAnswerList}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox Content="{Binding AnswerBody}" 
                            Margin="5,5"
                          
                            IsChecked="{Binding IsSelected}"
                               Checked="RadioButton_Checked"
                               />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <!--</StackPanel>-->
                </Grid>
            </Border>
        </DataTemplate>


    </Window.Resources>

    <Grid Loaded="Grid_Loaded">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.2*"/>
            <ColumnDefinition Width="*"/>

        </Grid.ColumnDefinitions>

        <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Background="#2196F3" Padding="20">
            <StackPanel >
                <TextBlock Text="Examination System"
                 FontSize="24"
                 Foreground="White"
                 FontWeight="Bold" />
                <StackPanel Orientation="Horizontal" Margin="0,5,0,0" >
                    <TextBlock FontSize="24" FontWeight="Bold" Foreground="White" Text="Time Remaining :" VerticalAlignment="Center"/>
                    <Label FontSize="24" FontWeight="Bold" Foreground="White" Content="60:00" HorizontalAlignment="Right"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <ScrollViewer Grid.Row="1" Grid.Column="1">
            <Border BorderThickness="2" Padding="20" Background="Bisque">
                <ItemsControl Name="ItemControlList">

                </ItemsControl>
            </Border>
        </ScrollViewer>
        <ScrollViewer Grid.Row="1" Grid.Column="0">
            <ListView Name="NavListView">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListViewItem">
                                    <Grid>
                                        <!-- Expanded state (hidden by default) -->
                                        <Border x:Name="ExpandedView"
                                                Background="#2196F3"
                                                CornerRadius="0,15,15,0"
                                                Visibility="Collapsed"
                                                Margin="5"
                                                Padding="10"
                                                >
                                            <Border.Effect>
                                                <DropShadowEffect Color="Black" 
                                            Direction="270" 
                                            ShadowDepth="3" 
                                            Opacity="0.5"
                                            BlurRadius="5"/>
                                            </Border.Effect>
                                            <ContentPresenter Margin="5,5,20,5"/>
                                        </Border>

                                        <!-- Normal state -->
                                        <Border x:Name="NormalView"
                                                MouseLeftButtonDown="NavItemClicked"
                                                Background="LightGray"
                                                CornerRadius="0,15,15,0"
                                                Padding="10"
                                                Margin="5,5,25,5">  
                                            <Border.Effect>
                                                <DropShadowEffect Color="Black" 
                                                      Direction="270" 
                                                      ShadowDepth="1" 
                                                      Opacity="0.3"
                                                      BlurRadius="3"/>      
                                            </Border.Effect>
                                            <ContentPresenter />
                                        </Border>
                                    </Grid>

                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="NormalView" Property="Visibility" Value="Collapsed"/>
                                            <Setter TargetName="ExpandedView" Property="Visibility" Value="Visible"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock FontSize="24" FontWeight="Bold" Foreground="White" Text="{Binding Id, StringFormat='Q: {0}'}"/>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </ScrollViewer>

        <!-- Footer Section -->
        <Border Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" 
                Background="#F5F5F5" 
                Padding="20">
            <StackPanel Orientation="Horizontal" 
                      HorizontalAlignment="Center">
                <Button Content="Submit Exam" 
                        Padding="30,10" 
                        Background="#4CAF50" 
                        Foreground="White" 
                        FontWeight="Bold"/>
            </StackPanel>
        </Border>
    </Grid>
</Window> 